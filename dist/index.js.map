{"version":3,"sources":["../src/index.js"],"names":["cmdValue","program","version","description","usage","arguments","action","cmd","command","option","options","OPTS","port","spa","showHidden","hidden","APP_DIR","process","cwd","path","join","app","use","listen","console","log","error","parse","argv","help","exit"],"mappings":";;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AAEA;;;;;;AAEA,IAAIA,QAAJ;;AAEAC,oBACEC,OADF,CACU,OADV,EAEEC,WAFF,CAEc,wCAFd,EAGEC,KAHF,CAGQ,sBAHR,EAIEC,SAJF,CAIY,OAJZ,EAKEC,MALF,CAKUC,GAAD,IAAS;AAChBP,YAAWO,GAAX;AACA,CAPF;;AASAN,oBACEO,OADF,CACU,OADV,EAEEL,WAFF,CAEc,wBAFd,EAGEM,MAHF,CAGS,YAHT,EAGuB,aAHvB,EAIEA,MAJF,CAIS,OAJT,EAIkB,kCAJlB,EAKEA,MALF,CAKS,aALT,EAKwB,0CALxB,EAMEH,MANF,CAMS,UAAUI,OAAV,EAAmB;AAC1BV,YAAW,OAAX;;AAEA,OAAMW,OAAO;AACZC,QAAMF,QAAQE,IAAR,IAAgB,IADV;AAEZC,OAAKH,QAAQG,GAAR,IAAe,KAFR;AAGZC,cAAYJ,QAAQK;AAHR,EAAb;;AAMA,OAAMC,UAAUC,QAAQC,GAAR,EAAhB;;AAEA,KAAG,oBAAWC,eAAKC,IAAL,CAAUJ,OAAV,EAAmB,YAAnB,CAAX,CAAH,EAAiD;AAChD,QAAMK,MAAM,wBAAZ;;AAEAA,MAAIC,GAAJ,CAAQ,sBAAO,MAAP,CAAR;AACAD,MAAIC,GAAJ,CAAQ,GAAR,EAAa,qBAAMN,OAAN,EAAeL,IAAf,CAAb;;AAEAU,MAAIE,MAAJ,CAAWZ,KAAKC,IAAhB,EAAsB,MAAM;AAC3BY,WAAQC,GAAR,CAAa,4BAA2Bd,KAAKC,IAAK,EAAlD;AACA,GAFD;AAGA,EATD,MAUI;AACHY,UAAQE,KAAR,CAAc,2BAAd;AACA;AACD,CA9BF;;AAgCAzB,oBAAQ0B,KAAR,CAAcV,QAAQW,IAAtB;;AAEA,IAAI,OAAO5B,QAAP,KAAoB,WAAxB,EAAqC;AACpCC,qBAAQ4B,IAAR;AACAZ,SAAQa,IAAR,CAAa,CAAb;AACA","file":"index.js","sourcesContent":["\n\nimport express from 'express'\nimport morgan from 'morgan'\nimport path from 'path'\nimport serve from './services/serve'\n\nimport {existsSync} from 'fs'\n\nimport program from 'commander'\n\nlet cmdValue\n\nprogram\n\t.version('0.1.0')\n\t.description('Minimalist http-server for static site')\n\t.usage('<commands> [options]')\n\t.arguments('<cmd>')\n\t.action((cmd) => {\n\t\tcmdValue = cmd\n\t})\n\nprogram\n\t.command('local')\n\t.description('run serph on localhost')\n\t.option('--port <n>', 'port to use')\n\t.option('--spa', 'redirect all route to index.html')\n\t.option('--no-hidden', 'ignore all request to dot files (hidden)')\n\t.action(function (options) {\n\t\tcmdValue = 'local'\n\n\t\tconst OPTS = {\n\t\t\tport: options.port || 8080,\n\t\t\tspa: options.spa || false,\n\t\t\tshowHidden: options.hidden\n\t\t}\n\t\t\n\t\tconst APP_DIR = process.cwd()\n\t\t\n\t\tif(existsSync(path.join(APP_DIR, 'index.html'))) {\n\t\t\tconst app = express()\n\t\t\n\t\t\tapp.use(morgan('tiny'))\n\t\t\tapp.use('*', serve(APP_DIR, OPTS))\n\t\t\n\t\t\tapp.listen(OPTS.port, () => {\n\t\t\t\tconsole.log(`Serph is up on localhost:${OPTS.port}`)\n\t\t\t})\n\t\t}\n\t\telse{\n\t\t\tconsole.error('file index.html not found')\n\t\t}\n\t})\n\nprogram.parse(process.argv)\n\nif (typeof cmdValue === 'undefined') {\n\tprogram.help()\n\tprocess.exit(1)\n}"]}